# 一、基本概念

- Linux **crontab** 是用来定期执行程序的命令
- **crond** 命令**每分钟**会定期检查是否有要执行的工作，如果有要执行的工作便会自动执行该工

- **注意：**新创建的 cron 任务，不会马上执行，至少要过 2 分钟后才可以，当然你可以重启 cron 来马上执行
- 而 linux 任务调度的工作主要分为以下两类
  - 系统执行的工作：系统周期性所要执行的工作，如备份系统数据、清理缓存
  - 个人执行的工作：某个用户定期要做的工作，例如每隔 10 分钟检查邮件服务器是否有新信，这些工作可由每个用户自行设置



# 二、基本语法

- `crontab [ -u user ] file` 或者 `crontab [ -u user ] { -l | -r | -e }`

  - crontab 是使用者在固定时间内执行程序，所以说crontab就是使用者的行程表。`-u user`表示操控那个用户的行程表(省略则表示操控当前用户)
  - -e : 执行文字编辑器来设定时程表，内定的文字编辑器是 VI，如果你想用别的文字编辑器，则请先设定 VISUAL 环境变数来指定使用那个文字编辑器(比如说 setenv VISUAL joe)
  - -r : 删除目前的时程表
  - -l : 列出目前的时程表

- 时间格式

  - ```
    f1 f2 f3 f4 f5 program
    ```

    - 其中 f1 是表示分钟，f2 表示小时，f3 表示一个月份中的第几日，f4 表示月份，f5 表示一个星期中的第几天。program 表示要执行的程序。
    - 当 f1 为 * 时表示每分钟都要执行 program，f2 为 * 时表示每小时都要执行程序，其馀类推
    - 当 f1 为 a-b 时表示从第 a 分钟到第 b 分钟这段时间内要执行，f2 为 a-b 时表示从第 a 到第 b 小时都要执行，其馀类推
    - 当 f1 为 */n 时表示每 n 分钟个时间间隔执行一次，f2 为 */n 表示每 n 小时个时间间隔执行一次，其馀类推
    - 当 f1 为 a, b, c,... 时表示第 a, b, c,... 分钟要执行，f2 为 a, b, c,... 时表示第 a, b, c...个小时要执行，其馀类推

    ```
    *    *    *    *    *
    -    -    -    -    -
    |    |    |    |    |
    |    |    |    |    +----- 星期中星期几 (0 - 6) (星期天 为0)
    |    |    |    +---------- 月份 (1 - 12) 
    |    |    +--------------- 一个月中的第几天 (1 - 31)
    |    +-------------------- 小时 (0 - 23)
    +------------------------- 分钟 (0 - 59)
    ```

    使用者也可以将所有的设定先存放在文件中，用 crontab file 的方式来设定执行时间。

- 语法的含义
  - 比如每周六的`10：20`执行一次 `2 10 * * 6`,千万不能写成 `* * * * 6`，这样表示每周六执行任意次
  - `10 10 * * */3` 星期3触发一次，然后
- 在线测试地址
  - https://tooltt.com/crontab/